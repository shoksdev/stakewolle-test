# API –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### üéØ–¶–µ–ª—å

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π RESTful API —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

---

### üìùDescription

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**  
1) –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (JWT, Oauth 2.0);
2) –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥. –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–∫—Ç–∏–≤–µ–Ω —Ç–æ–ª—å–∫–æ 1 –∫–æ–¥. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–¥–∞–Ω –µ–≥–æ —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏;
3) –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –ø–æ email –∞–¥—Ä–µ—Å—É —Ä–µ—Ñ–µ—Ä–µ—Ä–∞;
4) –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–º—É –∫–æ–¥—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ—Ñ–µ—Ä–∞–ª–∞;	
5) –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞—Ö –ø–æ id —Ä–µ—Ñ–µ—Ä–µ—Ä–∞;
6) UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger/ReDoc).

---

### üõ†–°—Ç–µ–∫

**–Ø–∑—ã–∫–∏**: Python;  
**–§—Ä–µ–π–º–≤–æ—Ä–∫–∏**: Django, Django REST Framework;  
**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**: djoser, psycopg2, python-dotenv, drf-yasg, simpleJWT, OAuth 2.0;  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL;  
**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**: Docker, docker-compose, Git.

---

### ‚öô–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—è Docker

---

1) **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: `git clone https://github.com/shoksdev/stakewolle-test.git`  
2) **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç**: `cd referal`  
3) **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `referal` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏**: 
SECRET_KEY (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)  
SOCIAL_AUTH_VK_OAUTH2_KEY (ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ VK API)  
SOCIAL_AUTH_VK_OAUTH2_SECRET (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ VK API)  
SQL_ENGINE (–¥–≤–∏–∂–æ–∫ SQL)  
POSTGRES_DB (–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
POSTGRES_USER (–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
POSTGRES_PASSWORD (–ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
POSTGRES_HOST (—Ö–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
POSTGRES_PORT (–ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
4) **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: `docker-compose run django python manage.py createsuperuser`  
5) **–ü–æ–¥–Ω–∏–º–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç**: `docker-compose up`  

### ‚öô–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ Docker

---

1) **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: `git clone https://github.com/shoksdev/stakewolle-test.git`  
2) **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç**: `cd referal`  
3) **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `pip install -r requirements.txt`  
4) **–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ PgAdmin**: –º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–∏–¥–µ–æ https://www.youtube.com/watch?v=h5wgbJiSy7Q;
5) **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `referal` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏**: 
SECRET_KEY (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)  
SOCIAL_AUTH_VK_OAUTH2_KEY (ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ VK API)  
SOCIAL_AUTH_VK_OAUTH2_SECRET (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ VK API)  
SQL_ENGINE (–¥–≤–∏–∂–æ–∫ SQL)  
POSTGRES_DB (–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
POSTGRES_USER (–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
POSTGRES_PASSWORD (–ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
POSTGRES_HOST (—Ö–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
POSTGRES_PORT (–ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)  
6) **–°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: `python manage.py createsuperuser`
7) **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏**: `python manage.py migrate`  
8) **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç**: `python manage.py runserver`  

---

### üìô–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1) –û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://127.0.0.1:8000/auth/users/ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `username`, `email` –∏ `password` –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏;
2) –ó–∞–ø–æ–º–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ —à–∞–≥–∞ ‚Ññ1;
3) –û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://127.0.0.1:8000/create/referral/code/ –∏ –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `referral_code_title` –∏ `referral_code_due_date` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é;
4) –û—Ç–ø—Ä–∞–≤—å—Ç–µ DELETE –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://127.0.0.1:8000/delete/referral/code/<int:pk>/ –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ pk –ø–µ—Ä–µ–¥–∞–π—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞;
5) –û—Ç–ø—Ä–∞–≤—å—Ç–µ GET –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://127.0.0.1:8000/get/referral/code/<str:email>/ –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ email –ø–µ—Ä–µ–¥–∞–π—Ç–µ email —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞;
6) –û—Ç–ø—Ä–∞–≤—å—Ç–µ GET –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://127.0.0.1:8000/get/referrals/list/<int:referrer_id>/ –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ referrer_id –ø–µ—Ä–µ–¥–∞–π—Ç–µ ID —Ä–µ—Ñ–µ—Ä–µ—Ä–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–±–æ –≤—Å–µ—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–∞—Ö;

**–ò–õ–ò**

**–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É http://127.0.0.1:8000/swagger/ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API**

---

#### –ë–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏. –ë—É–¥—É —Ä–∞–¥ –ª—é–±–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏. –í—Å–µ–≥–æ –¥–æ–±—Ä–æ–≥–æ!
